<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MAITANDE â€“ Aprende Agora</title>
  <style>
    body{ margin:0; font-family:Arial, Helvetica, sans-serif; background:#f4f6f8; color:#333; }
    header{ background:#0a3d62; color:#fff; padding:20px; display:flex; align-items:center; justify-content:space-between; }
    .logo{ display:flex; align-items:center; gap:10px; font-weight:bold; font-size:22px; }
    nav a{ color:#fff; margin-left:15px; text-decoration:none; font-weight:500; }
    nav a:hover{ text-decoration:underline; }
    .section{ padding:40px 20px; max-width:1100px; margin:auto; }
    .filters{ display:flex; gap:20px; margin-bottom:20px; flex-wrap:wrap; }
    select{ padding:10px; border-radius:8px; }
    .cards{ display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; }
    .card{ background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.08); cursor:pointer; transition:0.2s; }
    .card:hover{ transform:translateY(-4px); }
    .back-btn{ display:inline-block; margin-bottom:20px; padding:10px 15px; background:#0a3d62; color:#fff; border-radius:8px; cursor:pointer; text-decoration:none; }
    h1{ margin-bottom:15px; }
    p{ line-height:1.6; }
  </style>
</head>
<body>

<header>
  <nav>
    <a href="index.html" data-i18n="home">Home</a>
    <a href="#" data-i18n="learn">Aprende </a>
    <a href="kontaktu.html" data-i18n="contact">Kontaktu</a>
    <select id="langSwitcher">
      <option value="tet">Tetun</option>
      <option value="id">Indonesia</option>
      <option value="en">English</option>
    </select>
  </nav>
</header>

<section class="section" id="mainSection"></section>

<script>
const content = {
  tet:{ home:'Home', learn:'Aprende', contact:'Kontaktu', sectionTitle:'Artiklu sira', back:'Fila' },
  id:{ home:'Beranda', learn:'Belajar', contact:'Kontak', sectionTitle:'Semua artikel', back:'Kembali' },
  en:{ home:'Home', learn:'Learn', contact:'Contact', sectionTitle:'All article', back:'Back' }
};

const langSwitcher = document.getElementById('langSwitcher');
langSwitcher.addEventListener('change',()=> updateLanguage(langSwitcher.value));

function updateLanguage(lang){
  document.querySelectorAll('[data-i18n]').forEach(el=> el.textContent=content[lang][el.dataset.i18n]);
}

// Ambil artikel dari localStorage
let articles = JSON.parse(localStorage.getItem('maitande_articles')) || [];
const mainSection = document.getElementById('mainSection');

// Tampilkan daftar artikel
function renderList(){
  mainSection.innerHTML = `
    <h2 id="sectionTitle">${content[langSwitcher.value].sectionTitle}</h2>
    <div class="filters">
      <div>
        <label for="categoryFilter">Filtru kategoria:</label>
        <select id="categoryFilter"><option value="all">hotu</option></select>
      </div>
      <div>
        <label for="languageFilter">Filtru lingua:</label>
        <select id="languageFilter">
          <option value="all">hotu</option>
          <option value="tet">Tetun</option>
          <option value="id">Indonesia</option>
          <option value="en">English</option>
        </select>
      </div>
    </div>
    <div class="cards" id="articlesContainer"></div>
  `;

  const categoryFilter = document.getElementById('categoryFilter');
  const languageFilter = document.getElementById('languageFilter');
  const articlesContainer = document.getElementById('articlesContainer');

  // Tambahkan kategori unik ke filter
  const categories = [...new Set(articles.map(a=>a.category))];
  categories.forEach(cat=>{
    const opt = document.createElement('option'); opt.value=cat; opt.textContent=cat; categoryFilter.appendChild(opt);
  });

  function renderArticles(){
    const selectedCategory = categoryFilter.value;
    const selectedLanguage = languageFilter.value;
    articlesContainer.innerHTML = '';
    let filtered = articles;
    if(selectedCategory!=='all') filtered = filtered.filter(a=>a.category===selectedCategory);
    if(selectedLanguage!=='all') filtered = filtered.filter(a=>a.language===selectedLanguage);

    if(filtered.length===0){ articlesContainer.innerHTML='<p>Artiklu laiha.</p>'; return; }
    filtered.forEach(a=>{
      const card = document.createElement('div');
      card.className='card';
      card.innerHTML=`<h3>${a.title}</h3><p><em>${a.category} | ${a.language}</em></p><p>${a.content.substring(0,100)}...</p>`;
      card.addEventListener('click', ()=> renderDetail(a)); // kirim artikel klik langsung
      articlesContainer.appendChild(card);
    });
  }

  categoryFilter.addEventListener('change', renderArticles);
  languageFilter.addEventListener('change', renderArticles);
  renderArticles();
}

// Tampilkan detail artikel berdasarkan parameter artikel
function renderDetail(article){
  mainSection.innerHTML = `
    <a class="back-btn" onclick="renderList()">${content[langSwitcher.value].back}</a>
    <h1>${article.title}</h1>
    <p><em>${article.category} | ${article.language} | ${new Date(article.date).toLocaleString()}</em></p>
    <p>${article.content}</p>
  `;
}

// Render awal daftar artikel
renderList();
</script>

</body>
</html>
